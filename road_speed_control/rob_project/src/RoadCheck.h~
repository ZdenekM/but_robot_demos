/**
 * Trida pro analizu kvality cesty
 */

#ifndef RCH_H
#define	RCH_H
#include<iostream>
#include<string>
#include<cstdlib>
#include <cstdio>
#include <complex>
#include <valarray>
#include "Filter.h"


using namespace std;

class RoadCheck {
public:
    RoadCheck();
    RoadCheck(int frame_length_angle, float g, float gth, int frame_length_road); // nastaveni delkz okna pro uhel, nasobek v G , prah pretizeni, delka okna pro analizu cesty
    ~RoadCheck();
    float addSample(float x, float y, float z); // pridani dat z akcelerometru do filtru, x,y,z jednotlive osy
    void clearAll();
    bool countAngles(); //spocitat uhli
    float getAngleX(); //ziskani jednotlivych naklonu
    float getAngleY();
    float getAngleZ();
    float getV();

    float median(float a, float b, float c); //medianovy filtr o delce 3

private:
    float filter(float input);

    float g;
    float gth;

    float *x_frame;
    float *y_frame;
    float *z_frame;

    float *v_frame;
    float *filter_d;

    float angle_x;
    float angle_y;
    float angle_z;

    float v;

    int end;
    int length;
    int count;
    bool frame_full;

    Filter *timing;
    Filter *mean;
    float *b_timing;
    float *b_mean;
    float *med;
    int med_i;
};


#endif

